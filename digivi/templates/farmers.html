{% load i18n %}
<!DOCTYPE html>
<html lang="{{LANGUAGE_CODE}}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farm Storytelling Scroll</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
  :root[data-theme="dark"] {
  --primary: #349a62;
  --accent: #6fcf97;

  /* Backgrounds */
  --bg-main: linear-gradient(135deg, #0a0a0a 60%, #1a1a1a 100%);
  --bg-toggle: #1a2e23;
  --bg-toggle-hover: #24543a;
  --bg-content-block: rgba(10, 20, 15, 0.91);

  /* Text */
  --text-main: #d9f7e5;
  --text-block: #fff;
  --text-h2: #6fcf97;

  /* Button */
  --btn-bg-hover: #349a62;
  --btn-text-hover: #000;

  /* Shadows */
  --shadow-toggle: 0 2px 8px rgba(52,154,98,0.18);
  --shadow-content-block: 0 4px 24px rgba(52, 154, 98, 0.13);

  /* Theme toggle slider */
  --toggle-slider-bg: #349a62;
  --toggle-slider-color: #fff;
}

:root[data-theme="light"] {
  --primary: #218c5a;
  --accent: #7ee2a3;

  /* Prettier, layered backgrounds */
  --bg-main: linear-gradient(135deg, #f8fff5 0%, #e3fcec 60%, #b7eacb 100%);
  --bg-toggle: rgba(255,255,255,0.85);
  --bg-toggle-hover: #e8f8f1;
  --bg-content-block: rgba(255,255,255,0.96);

  /* Text */
  --text-main: #185c37;
  --text-block: #185c37;
  --text-h2: #218c5a;

  /* Button */
  --btn-bg-hover: #b7eacb;
  --btn-text-hover: #218c5a;

  /* Shadows */
  --shadow-toggle: 0 2px 12px rgba(111,207,151,0.16);
  --shadow-content-block: 0 4px 32px rgba(111, 207, 151, 0.13);

  /* Toggle slider */
  --toggle-slider-bg: linear-gradient(135deg, #7ee2a3 60%, #e3fcec 100%);
  --toggle-slider-color: #218c5a;
}

/* Main backgrounds and text */
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: var(--bg-main);
  color: var(--text-main);
}

h1 {
  text-align: center;
  margin-top: 40px;
  font-size: 2.2rem;
  background: linear-gradient(to right, var(--primary), var(--accent), #3cb371, var(--primary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 600;
}

.parallax-section {
  min-height: 420px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  margin: 0;
  padding: 0;
  background-attachment: fixed;
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
}

.content-block {
  background: var(--bg-content-block);
  border-radius: 24px;
  box-shadow: var(--shadow-content-block);
  padding: 38px 32px 32px 32px;
  max-width: 460px;
  margin: 48px;
  opacity: 0;
  transform: translateY(60px);
  transition: opacity 0.8s, transform 0.8s;
}

.content-block.visible {
  opacity: 1;
  transform: translateY(0);
}

.content-block h2 {
  color: var(--text-h2);
  margin-top: 0;
  font-size: 1.4rem;
  font-weight: 600;
}

.content-block p {
  font-size: 1rem;
  color: var(--text-block);
  margin-bottom: 0;
}

@media (max-width: 800px) {
  .content-block { padding: 22px 12px 16px 12px; margin: 18px;}
  .parallax-section { min-height: 320px;}
}

/* Theme toggle and language buttons */
.language-button-container {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1000;
    display: flex;
    gap: 10px;
    align-items: center;
}

.language-form {
    margin: 0;
}

.language-button {
    background: transparent;
    color: var(--accent);
    border: 2px solid var(--primary);
    padding: 8px 16px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
}

.language-button:hover {
    background-color: var(--btn-bg-hover);
    color: var(--btn-text-hover);
}

.home-btn {
    text-decoration: none;
    background: transparent;
    color: var(--accent);
    border: 2px solid var(--primary);
    padding: 8px 16px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    transition: background-color 0.3s, color 0.3s;
}

.home-btn:hover {
    background-color: var(--btn-bg-hover);
    color: var(--btn-text-hover);
}

/* THEME TOGGLE */
.theme-toggle {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    background: var(--bg-toggle);
    border: 2px solid var(--primary);
    border-radius: 50px;
    width: 60px;
    height: 32px;
    cursor: pointer;
    padding: 0 4px;
    transition: background 0.3s, border-color 0.3s, box-shadow 0.3s;
    position: relative;
    box-shadow: var(--shadow-toggle);
}

.theme-toggle:hover {
    border-color: var(--accent);
    background: var(--bg-toggle-hover);
}

.theme-toggle-slider {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: var(--toggle-slider-bg);
    border-radius: 50%;
    color: var(--toggle-slider-color);
    font-size: 16px;
    box-shadow: 0 2px 8px rgba(52,154,98,0.13);
    position: absolute;
    top: 4px;
    left: 4px;
    transition: left 0.3s cubic-bezier(0.4,0,0.2,1), background 0.3s, color 0.3s;
}

:root[data-theme="light"] .theme-toggle-slider {
  left: 34px;
  background: var(--toggle-slider-bg);
  color: var(--toggle-slider-color);
}
:root[data-theme="dark"] .theme-toggle-slider {
  left: 4px;
  background: var(--toggle-slider-bg);
  color: var(--toggle-slider-color);
}

  </style>
</head>
<body>
<div class="language-button-container">
    <form method="post" action="{% url 'set_language' %}">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <input type="hidden" name="language" value="{% if LANGUAGE_CODE == 'en' %}pa{% else %}en{% endif %}">
        <button type="submit" class="language-button">
            {% if LANGUAGE_CODE == 'en' %}
                Switch to Punjabi
            {% else %}
                Switch to English
            {% endif %}
        </button>
        <a href="{% url 'landing_protected' %}" class="home-btn">Home</a>
     
    </form>
    <button class="theme-toggle" onclick="toggleTheme()" title="{% trans 'Toggle theme' %}">
      <div class="theme-toggle-slider">
          <i class="fas fa-sun" id="theme-icon"></i>
      </div>
  </button>
</div>

<h1>{% trans "Farm Story: From Land to Irrigation" %}</h1>

<section class="parallax-section" style="background-image: url('https://i.ibb.co/DDLNCSdP/pexels-pixabay-51947.jpg');">
  <div class="content-block">
    <h2>{% trans "Farm Overview" %}</h2>
    <p>
      {% blocktrans %}
      A farm is a piece of land with its own irrigation source, managed by an owner or leaseholder. Each farm is divided into several adjacent soil plots (1–2 acres each) separated by small soil barriers. Plot positions are changed seasonally to adapt to conditions and maximize yields. Different crops or rice cultivation methods may be used on different plots within the same farm, but most farms grow only rice during Kharif. Land can be owned, leased, or a mix, with rare cases of government (Panchayat) leasing via auction.
      {% endblocktrans %}
    </p>
  </div>
</section>

<section class="parallax-section" style="background-image: url('https://i.ibb.co/DfjYC6tW/Screenshot-2025-07-07-at-11-52-54-PM.png');">
  <div class="content-block">
    <h2>{% trans "Farmer" %}</h2>
    <p>
      {% blocktrans %}
      The main farmer (owner or leaseholder) manages all cultivation activities, including irrigation, inputs, sowing, and harvest. Most farms are family-owned, but some larger farms are jointly run, often by brothers. Farmers may own multiple farms, with land titles typically in their name or a close relative’s. Only land owners qualify for government subsidies. Tenant farmers lease land formally or informally; many are also land owners expanding their operations through additional leased land.
      {% endblocktrans %}
    </p>
  </div>
</section>

<section class="parallax-section" style="background-image: url('https://i.ibb.co/bj4q5dq5/Screenshot-2025-07-07-at-11-56-29-PM.png');">
  <div class="content-block">
    <h2>{% trans "Irrigation" %}</h2>
    <p>
      {% blocktrans %}
      Most farms have exclusive tube-well excavated and operated within its land. Some farms share tube-wells with other farmers. But mostly it is exclusively used by the farm.
      Canal - It is used based on its availability, and the government controls it through upstream valves. Mostly it is applied into the farm through government-sponsored underground pipelines. Occasionally opportunistic farmers with plots adjacent to the canal will use diesel-based portable pumps to irrigate into their land.
      {% endblocktrans %}
    </p>
  </div>
</section>

<section class="parallax-section" style="background-image: url('https://i.ibb.co/SXnxcX8S/Screenshot-2025-07-08-at-12-00-30-AM.png');">
  <div class="content-block">
    <h2>{% trans "Open-air Canals" %}</h2>
    <p>
      {% blocktrans %}
      Irrigation water comes from two main sources: groundwater (via tube-wells) and canals (mainly through government-installed underground pipes). Once water reaches the farm, it is usually distributed to plots using small, open-air soil canals that rely on gravity. Farmers control irrigation by opening soil barriers to direct water to specific plots. Water loss from seepage and evaporation is common. Underground piping within farms is rare and mainly used on large farms; even then, some open-air canal use continues.
      {% endblocktrans %}
    </p>
  </div>
</section>

  <script>
    // Reveal sections as they enter viewport
    function revealOnScroll() {
      document.querySelectorAll('.content-block').forEach(block => {
        const rect = block.getBoundingClientRect();
        if (rect.top < window.innerHeight - 60) {
          block.classList.add('visible');
        }
      });
    }
    window.addEventListener('scroll', revealOnScroll);
    window.addEventListener('DOMContentLoaded', revealOnScroll);

    function setInitialTheme() {
    // Get theme from localStorage, or default to 'dark'
    const savedTheme = localStorage.getItem('theme');
    const theme = savedTheme ? savedTheme : 'dark';
    document.documentElement.setAttribute('data-theme', theme);
    updateThemeIcon(theme);
}

function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateThemeIcon(newTheme);
}

function updateThemeIcon(theme) {
    const icon = document.getElementById('theme-icon');
    if (icon) {
        icon.className = theme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
    }
}

// Call this on page load
setInitialTheme();
  </script>
</body>
</html>
